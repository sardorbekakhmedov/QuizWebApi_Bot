2023-06-23 10:22:25.126 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.TimeoutException: A timeout occurred after 30000ms selecting a server using CompositeServerSelector{ Selectors = MongoDB.Driver.MongoClient+AreSessionsSupportedServerSelector, LatencyLimitingServerSelector{ AllowedLatencyRange = 00:00:00.0150000 }, OperationsCountServerSelector }. Client view of cluster state is { ClusterId : "1", Type : "Unknown", State : "Disconnected", Servers : [{ ServerId: "{ ClusterId : 1, EndPoint : "Unspecified/localhost:27017" }", EndPoint: "Unspecified/localhost:27017", ReasonChanged: "Heartbeat", State: "Disconnected", ServerVersion: , TopologyVersion: , Type: "Unknown", HeartbeatException: "MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение. [::1]:27017
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.InitializeConnection(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.Heartbeat(CancellationToken cancellationToken)", LastHeartbeatTimestamp: "2023-06-23T05:22:22.4963160Z", LastUpdateTimestamp: "2023-06-23T05:22:22.4963178Z" }] }.
   at MongoDB.Driver.Core.Clusters.Cluster.ThrowTimeoutException(IServerSelector selector, ClusterDescription description)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedHelper.HandleCompletedTask(Task completedTask)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedAsync(IServerSelector selector, ClusterDescription description, Task descriptionChangedTask, TimeSpan timeout, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.Cluster.SelectServerAsync(IServerSelector selector, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAfterServerSelectionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.StartImplicitSessionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at QuizWebApi_Bot.Repositories.UserRepository.AddUserAsync(Int64 userChatId, String userNAme) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Repositories\UserRepository.cs:line 32
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 42
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
2023-06-23 10:22:37.634 +05:00 [ERR] BackgroundService failed
System.TimeoutException: A timeout occurred after 30000ms selecting a server using CompositeServerSelector{ Selectors = MongoDB.Driver.MongoClient+AreSessionsSupportedServerSelector, LatencyLimitingServerSelector{ AllowedLatencyRange = 00:00:00.0150000 }, OperationsCountServerSelector }. Client view of cluster state is { ClusterId : "1", Type : "Unknown", State : "Disconnected", Servers : [{ ServerId: "{ ClusterId : 1, EndPoint : "Unspecified/localhost:27017" }", EndPoint: "Unspecified/localhost:27017", ReasonChanged: "Heartbeat", State: "Disconnected", ServerVersion: , TopologyVersion: , Type: "Unknown", HeartbeatException: "MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение. [::1]:27017
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.InitializeConnection(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.Heartbeat(CancellationToken cancellationToken)", LastHeartbeatTimestamp: "2023-06-23T05:22:36.3286071Z", LastUpdateTimestamp: "2023-06-23T05:22:36.3286099Z" }] }.
   at MongoDB.Driver.Core.Clusters.Cluster.ThrowTimeoutException(IServerSelector selector, ClusterDescription description)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedHelper.HandleCompletedTask(Task completedTask)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedAsync(IServerSelector selector, ClusterDescription description, Task descriptionChangedTask, TimeSpan timeout, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.Cluster.SelectServerAsync(IServerSelector selector, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAfterServerSelectionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.StartImplicitSessionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at QuizWebApi_Bot.Repositories.UserRepository.GetAllUsersAsync() in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Repositories\UserRepository.cs:line 126
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 39
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 41
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2023-06-23 10:22:37.675 +05:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
System.TimeoutException: A timeout occurred after 30000ms selecting a server using CompositeServerSelector{ Selectors = MongoDB.Driver.MongoClient+AreSessionsSupportedServerSelector, LatencyLimitingServerSelector{ AllowedLatencyRange = 00:00:00.0150000 }, OperationsCountServerSelector }. Client view of cluster state is { ClusterId : "1", Type : "Unknown", State : "Disconnected", Servers : [{ ServerId: "{ ClusterId : 1, EndPoint : "Unspecified/localhost:27017" }", EndPoint: "Unspecified/localhost:27017", ReasonChanged: "Heartbeat", State: "Disconnected", ServerVersion: , TopologyVersion: , Type: "Unknown", HeartbeatException: "MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение. [::1]:27017
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.InitializeConnection(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.Heartbeat(CancellationToken cancellationToken)", LastHeartbeatTimestamp: "2023-06-23T05:22:36.3286071Z", LastUpdateTimestamp: "2023-06-23T05:22:36.3286099Z" }] }.
   at MongoDB.Driver.Core.Clusters.Cluster.ThrowTimeoutException(IServerSelector selector, ClusterDescription description)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedHelper.HandleCompletedTask(Task completedTask)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedAsync(IServerSelector selector, ClusterDescription description, Task descriptionChangedTask, TimeSpan timeout, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.Cluster.SelectServerAsync(IServerSelector selector, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAfterServerSelectionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.StartImplicitSessionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at QuizWebApi_Bot.Repositories.UserRepository.GetAllUsersAsync() in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Repositories\UserRepository.cs:line 126
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 39
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 41
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2023-06-23 10:22:56.004 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.TimeoutException: A timeout occurred after 30000ms selecting a server using CompositeServerSelector{ Selectors = MongoDB.Driver.MongoClient+AreSessionsSupportedServerSelector, LatencyLimitingServerSelector{ AllowedLatencyRange = 00:00:00.0150000 }, OperationsCountServerSelector }. Client view of cluster state is { ClusterId : "1", Type : "Unknown", State : "Disconnected", Servers : [{ ServerId: "{ ClusterId : 1, EndPoint : "Unspecified/localhost:27017" }", EndPoint: "Unspecified/localhost:27017", ReasonChanged: "Heartbeat", State: "Disconnected", ServerVersion: , TopologyVersion: , Type: "Unknown", HeartbeatException: "MongoDB.Driver.MongoConnectionException: An exception occurred while opening a connection to the server.
 ---> System.Net.Internals.SocketExceptionFactory+ExtendedSocketException (10061): Подключение не установлено, т.к. конечный компьютер отверг запрос на подключение. [::1]:27017
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Connect(EndPoint remoteEP)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.Connect(Socket socket, EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.TcpStreamFactory.CreateStream(EndPoint endPoint, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MongoDB.Driver.Core.Connections.BinaryConnection.OpenHelper(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Connections.BinaryConnection.Open(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.InitializeConnection(CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Servers.ServerMonitor.Heartbeat(CancellationToken cancellationToken)", LastHeartbeatTimestamp: "2023-06-23T05:22:54.7386297Z", LastUpdateTimestamp: "2023-06-23T05:22:54.7386304Z" }] }.
   at MongoDB.Driver.Core.Clusters.Cluster.ThrowTimeoutException(IServerSelector selector, ClusterDescription description)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedHelper.HandleCompletedTask(Task completedTask)
   at MongoDB.Driver.Core.Clusters.Cluster.WaitForDescriptionChangedAsync(IServerSelector selector, ClusterDescription description, Task descriptionChangedTask, TimeSpan timeout, CancellationToken cancellationToken)
   at MongoDB.Driver.Core.Clusters.Cluster.SelectServerAsync(IServerSelector selector, CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAfterServerSelectionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.AreSessionsSupportedAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoClient.StartImplicitSessionAsync(CancellationToken cancellationToken)
   at MongoDB.Driver.MongoCollectionImpl`1.UsingImplicitSessionAsync[TResult](Func`2 funcAsync, CancellationToken cancellationToken)
   at QuizWebApi_Bot.Repositories.UserRepository.AddUserAsync(Int64 userChatId, String userNAme) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Repositories\UserRepository.cs:line 32
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 42
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
2023-06-23 10:25:15.661 +05:00 [ERR] BackgroundService failed
Telegram.Bot.Exceptions.ApiRequestException: Forbidden: bot was blocked by the user
   at Telegram.Bot.TelegramBotClient.MakeRequestAsync[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at Telegram.Bot.TelegramBotClientExtensions.SendPhotoAsync(ITelegramBotClient botClient, ChatId chatId, InputFile photo, Nullable`1 messageThreadId, String caption, Nullable`1 parseMode, IEnumerable`1 captionEntities, Nullable`1 hasSpoiler, Nullable`1 disableNotification, Nullable`1 protectContent, Nullable`1 replyToMessageId, Nullable`1 allowSendingWithoutReply, IReplyMarkup replyMarkup, CancellationToken cancellationToken)
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 44
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 41
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2023-06-23 10:25:15.669 +05:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Telegram.Bot.Exceptions.ApiRequestException: Forbidden: bot was blocked by the user
   at Telegram.Bot.TelegramBotClient.MakeRequestAsync[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at Telegram.Bot.TelegramBotClientExtensions.SendPhotoAsync(ITelegramBotClient botClient, ChatId chatId, InputFile photo, Nullable`1 messageThreadId, String caption, Nullable`1 parseMode, IEnumerable`1 captionEntities, Nullable`1 hasSpoiler, Nullable`1 disableNotification, Nullable`1 protectContent, Nullable`1 replyToMessageId, Nullable`1 allowSendingWithoutReply, IReplyMarkup replyMarkup, CancellationToken cancellationToken)
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 44
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 41
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2023-06-23 10:29:54.310 +05:00 [ERR] BackgroundService failed
Telegram.Bot.Exceptions.ApiRequestException: Forbidden: bot was blocked by the user
   at Telegram.Bot.TelegramBotClient.MakeRequestAsync[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at Telegram.Bot.TelegramBotClientExtensions.SendPhotoAsync(ITelegramBotClient botClient, ChatId chatId, InputFile photo, Nullable`1 messageThreadId, String caption, Nullable`1 parseMode, IEnumerable`1 captionEntities, Nullable`1 hasSpoiler, Nullable`1 disableNotification, Nullable`1 protectContent, Nullable`1 replyToMessageId, Nullable`1 allowSendingWithoutReply, IReplyMarkup replyMarkup, CancellationToken cancellationToken)
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 44
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 41
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2023-06-23 10:29:54.319 +05:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Telegram.Bot.Exceptions.ApiRequestException: Forbidden: bot was blocked by the user
   at Telegram.Bot.TelegramBotClient.MakeRequestAsync[TResponse](IRequest`1 request, CancellationToken cancellationToken)
   at Telegram.Bot.TelegramBotClientExtensions.SendPhotoAsync(ITelegramBotClient botClient, ChatId chatId, InputFile photo, Nullable`1 messageThreadId, String caption, Nullable`1 parseMode, IEnumerable`1 captionEntities, Nullable`1 hasSpoiler, Nullable`1 disableNotification, Nullable`1 protectContent, Nullable`1 replyToMessageId, Nullable`1 allowSendingWithoutReply, IReplyMarkup replyMarkup, CancellationToken cancellationToken)
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendQuestionAsync(Int64 userChatId, ITelegramBotClient botClient, AsyncServiceScope serviceScope, IQuestionRepository questionService, CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 61
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 44
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.SendMessageAsync(CancellationToken cancellationToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 41
   at QuizWebApi_Bot.HelperServices.HandleBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\HelperServices\HandleBackgroundService.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2023-06-23 12:08:54.374 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.ArgumentNullException: Value cannot be null. (Parameter 'token')
   at Telegram.Bot.TelegramBotClientOptions..ctor(String token, String baseUrl, Boolean useTestEnvironment)
   at Telegram.Bot.TelegramBotClient..ctor(String token, HttpClient httpClient)
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
2023-06-23 12:08:54.519 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.ArgumentNullException: Value cannot be null. (Parameter 'token')
   at Telegram.Bot.TelegramBotClientOptions..ctor(String token, String baseUrl, Boolean useTestEnvironment)
   at Telegram.Bot.TelegramBotClient..ctor(String token, HttpClient httpClient)
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
2023-06-23 12:08:56.649 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.ArgumentNullException: Value cannot be null. (Parameter 'token')
   at Telegram.Bot.TelegramBotClientOptions..ctor(String token, String baseUrl, Boolean useTestEnvironment)
   at Telegram.Bot.TelegramBotClient..ctor(String token, HttpClient httpClient)
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
2023-06-23 12:09:00.776 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.ArgumentNullException: Value cannot be null. (Parameter 'token')
   at Telegram.Bot.TelegramBotClientOptions..ctor(String token, String baseUrl, Boolean useTestEnvironment)
   at Telegram.Bot.TelegramBotClient..ctor(String token, HttpClient httpClient)
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
2023-06-23 12:09:08.902 +05:00 [ERR] Internal QUIZ_WEB_API server error!
System.ArgumentNullException: Value cannot be null. (Parameter 'token')
   at Telegram.Bot.TelegramBotClientOptions..ctor(String token, String baseUrl, Boolean useTestEnvironment)
   at Telegram.Bot.TelegramBotClient..ctor(String token, HttpClient httpClient)
   at QuizWebApi_Bot.Controllers.BotController.PostUpdate(Update update, CancellationToken cts) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Controllers\BotController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at QuizWebApi_Bot.Middleware.QuizWebApiErrorMiddleware.Invoke(HttpContext httpContext) in C:\C#\WepProjects\QuizWebApi_Bot\QuizWebApi_Bot\Middleware\QuizWebApiErrorMiddleware.cs:line 18
